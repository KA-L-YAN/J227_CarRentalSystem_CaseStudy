/*
	NAME : J227 PAVAN KALYAN BUDAMACHARLA
    PDF : CASE STUDY - CAR RENTAL SYSTEM
*/

------------------------------------------------------------------------------------

-- DATABASE CREATION

CREATE DATABASE CASESTUDY;
USE CASESTUDY;

-- TABLE VEHICLE

DROP TABLE LEASE;
DROP TABLE PAYMENT;
DROP TABLE VEHICLE;
DROP TABLE CUSTOMER;

CREATE TABLE VEHICLE (
    VEHICLE_ID INT PRIMARY KEY auto_increment,
    MAKE VARCHAR(50),
    MODEL VARCHAR(25),
    YEAR INT,
    DAILYRATE DECIMAL(10 , 2 ),
    STATUS ENUM('AVAILABLE', 'NOT_AVAILABLE'),
    PASSENGERCAPACITY INT,
    ENGINECAPACITY DECIMAL(10,2)
);

-- TABLE CUSTOMER

CREATE TABLE CUSTOMER (
    CUSTOMER_ID INT PRIMARY KEY auto_increment,
    FIRST_NAME VARCHAR(20),
    LAST_NAME VARCHAR(20),
    EMAIL VARCHAR(20),
    PHONE_NUMBER VARCHAR(11)
);

-- TABLE LEASE

CREATE TABLE LEASE (
    LEASE_ID INT PRIMARY KEY auto_increment,
    VEHICLE_ID INT,
    CUSTOMER_ID INT,
    STARTDATE DATE,
    ENDDATE DATE,
    TYPE ENUM('DAILYLEASE', 'MONTHLYLEASE'),
    FOREIGN KEY (VEHICLE_ID)
        REFERENCES VEHICLE (VEHICLE_ID) ON DELETE CASCADE,
    FOREIGN KEY (CUSTOMER_ID)
        REFERENCES CUSTOMER (CUSTOMER_ID) ON DELETE cascade
);

-- PAYMENT TABLE

CREATE TABLE PAYMENT (
    PAYMENT_ID INT PRIMARY KEY auto_increment,
    LEASE_ID INT,
    PAYMENTDATE DATE,
    AMOUNT DECIMAL(10 , 2 ),
    FOREIGN KEY (LEASE_ID)
        REFERENCES LEASE (LEASE_ID) ON DELETE CASCADE
);

------------------------------------------------------------------------------------

-- INSERTING RECORDS

INSERT INTO VEHICLE VALUES (101,'TOYOTA','CAMRY',2022,4500,'AVAILABLE',5,2.5),
						   (102,'HONDA', 'CIVIC',2023,5000,'AVAILABLE',5,1.5),
                           (103,'CHEVORELET','EQUINOX',2020,9000,'NOT_AVAILABLE',5,1.5),
                           (104,'AUDI', 'Q5',2023,10000,'NOT_AVAILABLE',5,2),
                           (105,'FORD', 'F-150',2021,6000,'AVAILABLE',6,3.5);


INSERT INTO CUSTOMER VALUES (201,'NELSON','BABU','NBABU@GMAIL.COM','93921678797'),
						   (202,'MADHURI','DIXIT','DIXIT@GMAIL.COM','93921658797'),
                           (203,'NARAYANA','SMITH','NSMITH@GMAIL.COM','93921456797'),
                           (204,'MAXIM','JASON','MJ@GMAIL.COM','93989078797'),
                           (205,'PETER','PARKER','SPIDY@GMAIL.COM','93735678797');


INSERT INTO LEASE VALUES (301,103,202,'2024-01-01','2024-01-02','DAILYLEASE'),
						 (302,101,201,'2024-02-10','2024-02-13','DAILYLEASE'),
                         (303,104,204,'2024-01-01','2024-02-01','MONTHLYLEASE'),
                         (304,105,205,'2024-02-11','2024-03-11','MONTHLYLEASE'),
                         (305,102,203,'2024-02-03','2024-02-06','DAILYLEASE');


INSERT INTO PAYMENT VALUES(401,301,'2024-01-01',9000),
						  (402,302,'2024-02-10',13500),
                          (403,303,'2024-01-01',300000),
                          (404,304,'2024-02-11',180000),
                          (405,305,'2024-02-03',1500);






